# 네트워크 기본 구조 

## 프로토콜 
- 현대 인터넷은 호스트간 패킷을 교환하는 방식으로 대부분 패킷 교환 방식을 사용한다. 
- 사람이 의사소통을 하기 위해서는 합의된 방식으로 이루어지는 것 처럼 네트워크에서도 노드 간에 정보를 올바르게 주고 받기위해 합의된 규칙, 방법이 있는데 이를 **프로토콜**이라고 한다.
- 서로 다른 통신 장치들이 정보를 주고 받기 위해서는 프로토콜이 통해야 한다. 
- 프로토콜은 저마다 목적과 특징을 가지고 있다. 

## 네트워크 참조 모델 
- 네트워크를 통해 정보를 주고 받을 때 정형화된 여러 단계를 거치는데 이 과정을 계층으로 표현할 수 있다. 
- 통신이 일어나는 각 과정을 계층으로 나눈 구조를 네트워크 참조 모델이라고 하고 계층으로 표현한다는 점에서 네트워크 계층 모델이라고 한다. 
- 통신 과정을 계층으로 나누면 네트워크 구성과 설계가 용이하며, 문제 진단과 해결이 용이하다. 

### OSI 모델 
- 국제 표준화 기구에서 만든 네트워크 참조 모델이며 7개의 계층으로 나뉜다. 

#### 물리계층 
- OSI 최하단에 있는 계층으로 1, 0으로 표현되는 비트 신호를 주고 받는 계층이다. 
#### 데이터 링크 계층 
- 네트워크 **주변 장치** 간의 정보를 올바르게 주고 받기 위한 계층이다. 
- 물리 계층을 통해 주고 받는 정보에 오류가 없는지 확인 하고 MAC 주소를 통해서 네트워크 송수신지를 특정 가능하다. 
- 전송 가정에서 발생하는 충돌 문제를 해결하는 계층이기도 하다. 
#### 네트워크 계층 
- 메시지를 다른 수신지까지 전달하는 계층이다. 
- 네트워크 간의 통신이 이루어지는 계층이며 인터넷을 가능하게 하는 계층이라고도 할 수 있다. 
- 네트워크 계층에서 IP라는 주소 체계를 통해 통신하고자 하는 수신지의 호스트와 네트워크를 식별하며 최적으 경로를 결정한다. 

#### 전송 계층 
- 신뢰성 있고 안정성 있는 전송을 해야 할 때 필요한 계층이다. 
- 패킷의 흐름 제어, 전송 오류 점검등 신뢰성있고 안정적인 전송이 이루어지도록 한다. 

#### 세션 계층 
- 통신을 주고받는 호스트 응용 프로그램 간의 연결 상태를 유지하거나 종료 되었을 때 끊어주는 역할을 한다. 

#### 표현 계층 
- 사람이 이해할 수 있는 언어인 문자를 컴퓨터가 이해할 수 있는 코드로 변환, 압축, 암호화 같은 작업이 이루어진다. 

#### 응용 계층 
- 사용자가 이용할 응용 프로그램에 다양한 네트워크 서비스를 제공한다. 

### TCP/IP 모델 
- OSI 모델은 네트워크를 이론적으로 기술하고 이해할 때 사용하는 반면에 TCP/IP모델은 이론보다 구현에 중점을 둔 모델이다. 

#### 네트워크 액세스 계층 
- OSI의 데이터 링크 계층과 유사하다. 
#### 인터넷 계층 
- OSI의 네트워크 계층과 유사하다. 
#### 전송 계층 
- OSI의 전송 계층과 유사하다. 
#### 응용 계층 
- OSI의 세션 계층 , 표현 계층, 응용 계층을 합친 것과 유사하다. 

## 캡슐화와 역캡슐화 
### 캡슐화 
- 패킷 교환 네트워크에서 메시지는 패킷 단위로 전송된다. 
- 어떤 정보를 송신 할 때 각 계층에서 상위 계층으로 부터 내려 받은 패킷을 페이로드로 삼고 프로토콜에 걸맞는 헤더 혹은 트레일러를 덧붙인 후 하위 계층으로 전송한다. 
- 한 단계 아래 층은 바로 위 계층으로 받은 패킷에 헤더 및 트레일러를 추가해 나가는데 이를 캡슐화(encapsulation)라고 한다. 

### 역캡슐화 
- 어떤 메시지를 수신할 때 캡슐화 과정에서 붙었던 헤더 및 트레일러를 각 계층에서 확인 후 제거하는데 이를 역캡슐화(decapsulation)라고 한다. 

## PDU 
- 각 계층에서 송수신되는 메시지의 단위를 PDU라고 한다. 
- 상위 계층에서 전달받은 데이터에 현재 계층의 프로토콜 헤더 및 트레일러를 추가하면 현재 계층의 PDU가 된다. 

| 계층 번호 | 계층 이름             | PDU 이름                        | 설명 |
|-----------|------------------------|----------------------------------|------|
| 7         | 응용 계층 (Application) | Data                            | 사용자와 직접 상호작용하는 데이터 (예: HTTP 요청 등) |
| 6         | 표현 계층 (Presentation)| Data                            | 데이터 인코딩, 압축, 암호화 처리 |
| 5         | 세션 계층 (Session)     | Data                            | 세션 설정, 유지, 종료 등 연결 관리 |
| 4         | 전송 계층 (Transport)   | Segment (TCP) / Datagram (UDP) | 포트 번호 포함, 흐름 제어 및 오류 복구 |
| 3         | 네트워크 계층 (Network) | Packet                          | IP 주소 포함, 라우팅 처리 |
| 2         | 데이터링크 계층 (Data Link) | Frame                       | MAC 주소, 오류 검출 정보(FCS) 포함 |
| 1         | 물리 계층 (Physical)     | Bits                            | 0과 1의 전기적/광학적 신호 |
- PDU는 전송 계층 이하의 메시지를 구분하기 위해서 사용한다.
- 전송 계층 보다 높은 계층에서는 데이터 혹은 메시지로 지칭하는 경우가 많기 때문이다. 

## 네트워크 성능 지표 
#### 처리율(throughput) 
- 단위 시간당 네트워크를 통해 실제로 전송되는 정보량을 의미한다.
- bps, mbps, pps 단위를 사용한다. 

#### 대역폭(bandwidth) 
- 신호처리영역과 네트워크 성능 측정 영역에서의 정의가 다르다. 
- 단위 시간 동안 송수신할 수 있는 최대 정보량을 의미한다. 
  
#### 패킷 손실 (packet loss)
- 송수신시 패킷이 손실되는 상황을 의미한다. 
- 높은 트래픽으로 인해 노드가 순간적으로 처리해야 할 패킷이 너무 많아 지거나 네트워크상 예기치 못한 상화ㅇ이 발생하면 패킷 손실이 발생 할 수 있다. 

--- 
> 강민철, 『혼자 공부하는 네트워크』, 한빛미디어 (2018)    


