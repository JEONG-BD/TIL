## Computer Architecture

### 4장 CPU의 작동원리   

### 4-02 레지스터    
- **레지스터**
  - 프로그램 속 명령어와 데이터는 실행 전후 반드시 레지스터에 저장됨
  - 레지스터에 값만 잘 관찰해도 프로그램의 실행 흐름을 파악 가능
  - 상용화 된 CPU속 레지스터들은 CPU마다 이름, 크기, 종류가 다양함 
  ***
- **레지스터 종류**
  - **프로그램 카운터(PC: Program Counter)**
    - 메모리에서 가져올 명령어의 주소, 메모리에서 읽어들일 명령어의 주소 저장
    - 프로그램 카운터를 명령어 포인터(IP:Instruction Pointer)라고 하는 CPU도 존재  
  <br>
  
  - **명령어 레지스터(IR: Instruction Register)**
    - 해석할 명령어, 방금 메모리에서 읽어들인 명령어를 저장하는 레지스터
    - 제어장치는 명령어 레지스터 속 명령어를 받아들이고 이를 해석한 뒤 제어신호를 내보냄   
  <br>

  - **메모리 주소 레지스터(MAR: Memory Address Register)**
    - 메모리의 주소를 저장하는 레지스터
    - CPU가 읽어 들이고자 하는 주소 값을 주소 버스로 보낼 때 메모리 주소 레지스터를 거침  
  <br>

  - **메모리 버퍼 레지스터(MBR: Memory Buffer Register)**
    - 메모리와 주고받을 값(데이터와 명령어)를 저장하는 레지스터
    - 메모리에 쓰고 싶은 값 , 메모리로 부터 전달받은 값은 메모리 버퍼 레지스터를 거침  
  <br>

  - **플래그 레지스터(Flag Register)**
    - ALU 연사 결과에 따른 플래그를 플래그 레지스터에 저장  
  <br>

  - **범용 레지스터(General Purpose Register)**
    - 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터
    - 메모리 버퍼 레지스터는 데이버 버스로 주고 받을 값만 저장, 메모리 주소 레지스터는 주소 버스로 내보낼 주소값만 저장
    - 범용 레지스터는 데이터와 주소를 모두 저장 가능
  <br>

  - **스택 포인터(Stack Pointer)**
    - 스택의 꼭대기를 가리키는 레지스터 
  <br>
  
  - **베이스 레지스터(Base Register)**
    - 주소 지정에 사용될 수 있는 특별한 레지스터
  <br> 
    
***
- **스택 주소 지정 방식**
  - 스택과 스택 포인터를 이용한 주소 지정 방식
  - 스택 포인터는 스택의 꼭대기를 가리키는 레지스터 (스택 포인터는 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터)
  - 스택 포인터는 스택의 어디까지 데이터가 채워져 있는지에 대한 표시
    > 스택은 메모리 안에 존재 메모리 안에 스택처럼 사용할 영역이 정해져 있음(스택 영역)
        
- **변위 주소 지정 상식**
  - 명령어는 연산코드와 오퍼랜드로 구성 오퍼랜드 필드에는 메모리의 주소가 담길 때도 있음
  - 변위 주소 지정 방식이란 오퍼랜드 필의 값과 특정 레지스터의 값을 더하여 유효주소를 얻어내는 방식
  - 변위 주소 지정 방식을 사용하는 명령어
    > 연산 코드, 어떤 레지스터의 값과 더할지를 나타내는 레지스터 필드, 주소를 담고 있는 오퍼랜드 필드로 구성
  - 변위 주소 지정 방식은 상대 주소 지정방식과 베이스 레지스터 주소 지정 방식으로 구분
  <br>
  
  - 상대 주소 지정 방식(relative addrssing mode)
    - 오퍼랜드와 프로그램 카운터의 값을 더하여 유효주소를 얻음
    - 상대 주소 지정 방식은 프로그래밍 언어의 if문과 유사하게 모든 코드를 실행하는 것이 아닌 분기 하여 특정 주소의 코드를 실행할 때 사용
       
  - 베이스 레지스터 주소 지정 방식(base register addressing mode)
    - 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식
    - 베이스 레지스터란 '기준 주소', 오퍼랜드는 '기준 주소로 부터 떨어진 거리' 역할을 함
    
***
> 강민철, 『혼자 공부하는 컴퓨터 구조 + 운영체제』, 한빛미디어(2022)  
  
