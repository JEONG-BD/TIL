# 응용 계층 

## 도메인 네임과 네임서버 
- 네트워크 상의 어떤 호스트를 특정하기 위해서 IP주소를 사용한다. 
- 모든 호스트의 IP 주소를 기억하고 있기도 어렵고 호스트의 IP 주소는 언제든지 바뀔 수 있다. 
- 사용자는 상대 호스트를 특정하기 위해서 IP 주소 보다는 도메인 네임을 많이 사용한다. 
- 도메인 네임과 IP주소는 네임 서버에서 관리한다. 
- 도메인 네임을 관리하는 서버를 DNS 서버라고도 부른다. 

### 네임 서버의 관리 방식
- 도메인 네임은 점을 기준으로 계층적을 분류된다. 
- 최상단에 루트 도메인이 있고 그 다음 단위인 최상위 도메인이 있으며 그 다음의 도메인이 있다. 
- www.example.com에서 www는 3단계 도메인에 해당 한다. 
- www.example.com처럼 도메인 네임을 모두 포함하는 도메인 네임을 FQDN(FQDN:Fully Qualified Domain Name)라고 한다.

### DNS(Domain Name System)
- 도메인 네임은 계층적인 형태를 띠고 있으며 계층적인 도메인 네임을 효율적으로 관리하기 위해서 네임 서버 또한 계층적인 형태를 띠고 있다. 
- 네임 서버는 여러 개 존재하면서 전 세계 여러 곳에 위치하고 있다. 계층적이고 분산된 도메인 네임에 대한 관리 체계를 도메인 네임 시스템 이라고 한다.

### 계층적 네임 서버 
- IP 주소를 모르는 상태에서 도메인 네임에 대응되는 IP주소를 알아내는 과정을 도메인 네임을 풀이(resolving) 한다고 표현한다. 
- 이 과정에서 다양한 네임 서버들이 사용되는데 중요한 역할을 하는 네임 서버 로컬 네임서버, 루트 네임서버, TLD(최상위 도메인) 네임 서버, 책임 네임 서버 총 네가지 이다. 

#### 로컬 네임 서버 
- 클라이언트와 맞닿아 있는 네임 서버로 클라이언트가 도메인 네임을 이용해 IP주소를 알아내고자 할 때 가장 먼저 찾게 되는 네임 서버이다. 
- 클라이언트가 로컬 네임 서버를 찾을 수 있으려면 로컬 네임 서버 주소를 알아야 하는데 로컬 네임 서버는 일반적으로 ISP에서 할당해 준다. 
- 공개 DNS서버를 이용할 수도 있다. 

#### 루트 네임 서버 
- 클라이언트가 로컬 네임 서버에게 특정 도메인 네임에 대응하는 IP주소가 무엇인지를 질의했다고 가정할 때 로컬 네임 서버가 특정 도메인 네임에 대응하는 IP 주소를 모를 때는 루트 네임 서버에게 해당 도메인 네임을 질의 하게 된다. 
- 루트 네임 서버는 루트 도메인을 관장 하는 네임 서버로 질의에 대한 TLD 네임 서버의 IP 주소를 반환 가능하다. 

####  TLD 네임 서버 
- TLD 네임 서버는 TLD를 관리하는 네임서버이다. TLD네임 서버는 TLD의 하위 도메인 네임을 관리하는 네임 서버 주소를 반환할 수 있다. 

#### 책임 네임 서버 
- 특정 도메인 영역을 관리하는 DNS 서버로 자신이 관리하는 도메인 영역의 질의에 대해서는 다른 네임 서버에게 떠넘기고 곧바로 대답할 수 있는 네임 서버이다. 
- 책임 DNS 서버는 로컬 DNS 서버가 마지막으로 질의하는 DNS 서버이다. 

### 재귀적 질의(recursive query)
- 재귀적 질의는 클라이언트가 로컬 네임 서버에게 도메인을 질의하면 로컬 네임 서버가 루트 네임 서버에게 질의를 하고 루트 네임 서버가 TLD네임 서버에게 TLD 네임 서버가 다시 책임 네임 서버에게 질의 하는 과정을 거친다. 
  

### 반복적 질의(iterative query)
- 반복적 질의는 클라이언트가 로컬 네임 서버에게 IP주소를 알고 싶은 도메인 네임을 질의 하면 로컬 네임 서버는 루트 도메인 서버에세 질의해서 다음 질의한 네임 서버의 주소를 응답 받고 다음 TLD 네임 서버에게 질의해서 다른 DNS 서버의 주소를 응답받는 과정을 반복하는 것이다. 

### DNS 캐시 
- 도메인 네임 리졸빙 과정에서는 도메인 네임을 리졸빙 하기 위해서 많은 과정을 거쳐야 하기 때문에 오래 걸리고 네트워크상의 메시지가 지나치게 늘어날 수 있다. 
- 네임 서버들이 기존에 응답 받은 결과를 임시로 저장했다가 추후 같은 질의들이 들어오면 이를 활용하는 경우가 많은데 이를 DNS 캐시 라고 한다. 
- DNS 캐시를 저장하는 용도로만 사용되는 서버도 존재한다. 

--- 
> 강민철, 『혼자 공부하는 네트워크』, 한빛미디어 (2018)    

 