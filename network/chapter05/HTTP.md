# 응용 계층 
## HTTP 
### HTTP의 특성1 - 요청 응답 프로토콜 
- HTTP는 클라이언트 서버 구조 기반의 요청 - 응답 프로토콜이다. 
- HTTP 요청 메시지와 응답 메시지를 주고받는 구조로 동작한다. 
  
### HTTP의 특성2 - 미디어 독립적 프로토콜 
- 클라이언트는 HTTP 요청 메시지를 통헤 서버의 자원을 획득 할 수도 있고 서버는 HTTP 응답 메시지로 요청 자원에 대한 응답할 수 있다. 
- HTTP이 주고 받는 자원은 RFC 9110에 언급 되어 있다.  

        The target of an HTTP request of called a "resource".
        HTTP does not limit the nature of a resource;
        it merely defined an interface that might be used to interact with resource Most resources are identified by a Uniform Resource Identifier 

- HTTP 는 주고받을 자원의 특성과 무관하게 그저 자원을 주고 받는 인터페이스 역할만을 수행한다. 
- HTTP에서 메시지로 주고 받는 자원의 종류를 미디어 타입이라고 하며 MIME Type(Multipurpose Internet Mail Extensions)이라고도 부른다. 
- 미디어 타입은 일종의 웹 세상의 확장자 같은 개념이다. HTTP를 통해 송수신 하는 정보의 종류는 미디어 타입으로 나타낼 수 있다. 
- 미디어 타입은 기본적으로 슬래시를 기준으로 하는 타입/서브 타입 형식으로 구성된다. 
- 타입은 데이터의 유형을, 서브 타입은 주어진 타입에 대한 세부 유형을 나타낸다. 

### HTTP의 특성3 - 스테이트 리스 프로토콜 
- HTTP는 상태를 유지하지 않는 스테이트 리스 프로토콯이다. 
- 서버가 HTTP 요청을 보낸 클라이언트와의 관련된 상태를 기억하지 않는다. 
- HTTP 서버는 일바적으로 많은 클라이언트와 동시에 상호작용을 하고 동시에 처리해야 할 요청이 많이 때문에 모든 클라이언트의 상태 정보를 유지하는 것은 서버에 큰 부담이 된다. 
- 서버는 하나가 아니라 여러 대로 구성될 수 있기 때문에 클아언트는 여러 서버를 동시에 이용하기가 어려운데 모든 서버가 클라이언트의 상태 정보를 공유하는 것은 어렵기 때문이다. 
- HTTP가 처음 만들어졌을 때 부터 오늘날까지 이어지는 중요한 설계의 목표는 확정성과 견고성이다. 

### HTTP의 특성4 - 지속 연결 프로토콜 
- 오늘날 많이 사용되는 버전은 HTTP 1.0, HTTP 2.0이 포함된다. 
- HTTP는 TCP 상에서 동작하는데 HTTP는 비연결형 프토로콜이지만 TCP는 연결형 프로토콜이다. 
- 초기의 HTTP 버전 1.0  이하는 TCP의 3 Way-Handshake를 통해 TCP 연결을 수립 후에 요청에 대한 응답을 받으면 연결을 종료하는 방식으로 동작했다. 
- 추가적인 요청 응답을 위해서는 다시 TCP 연결을 수립해야 한다. 
- 최근 대중적으로 사용되는 HTTP1.1 이상은 지속 연결 (Persistent coonnectiion)이라는 기술을 제공한다. 

### HTTP 메시지 구조   
- HTTP 는 시작라인, 필드라인, 메시지 본문으로 이루어져 있다.

#### 시작 라인 
- HTTP 메시지는 요청 메시지일수도 응답 메시지일 수도 있다. 
- HTTP 메시지가 요청 메시지일 경우 요청 라인, 응갑 메시지일 경우 시작라인은 상태 라인이 된다. 
        
        요청 라인 = 메서드 (공백) 요청 대상(공백) HTTP 버전(줄바꿈)
  
##### 메서드 
- 클라이언트가 서버의 자원에 대해 수행할 작업의 종류를 나타낸다. 
- 요청 대상이 달라도 메서드가 다르면 각기 다른 요청으로 처리된다. 

#### 요청 대상 
- HTTP 요청을 보낼 서버의 자원을 의미한다. 
- URI의 경로가 명시된다. 

#### HTTP 버전 
- HTTP 버전을 의미한다. 

#### 응답 
        HTTP 버전 (공백) 사태코드  이유구문 
- HTTP 버전은 사용된 HTTP의 버전을 의미한다. 
- 항태 코드는 요청에 대한 결과를 나타내는 세자리 정수이다. 
- 이유 구문(Reason Phrase) 은 상태 코드에 대한 문자열 혈태의 설명을 의하나다. 
  

#### 필드 라인 
- 필드라인에는 0개 이상의 http 헤더가 명시된기 때문에 이를 헤더라인 이라고 부른다. 
- HTTP 헤더란 HTTP 통신에 필요한 부가 정보를 의미한다. 공식 문서에서는 필드라인에 0갸 이상의 http 헤더가 명시된다고 언급하지만 http 메시지에는 아주 다양한 헤더들이 사용되는 것이 일반적이다. 
- 필드 라인에 표시되는 각 http 헤더는 콜론을 기준으로 헤더 이름과 하나 이상의 헤더 값으로 구성된다. 

        GET /example-page HTTP/1.1
        Host: www.example
        User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0
        Accept: text/html
#### 메시지 본문 
- 본문이 필요한 경우 메시지 본문이 명시된다. 메시지 본문은 존재하지 않을 수도 있고 다양한 콘텐츠 타입이 사용된다. 


### HTTTT 메서드 
  |HTTP메서드| 설명| 
  |---|---|
  |GET|자원을 습득하기 위한 메서드| 
  |HEAD|GET과 동일하지만 헤더만들 응답받는 메서드| 
  |POST|서버로 하여금 틁정 작접을 처리하게끔 하는 메서드 | 
  |PUT| 자원을 대체하기 위한  메서드 | 
  |PATHCH|자원에 대한 부분 수정을 위한 메서드| 
  |DELETE| 자원을 삭제하기 위한 메서드| 
  |CONNECT| 자원에 대한 양방향 연결을 시작하는 메서드| 
  |OPTIONS| 사용 가능한 메서 등 통신 옵션을 확인하는 메서드| 
  |TRACE| 자원에 대한 루프백 테스트를 수행하는 메서드 | 

### HTTP 상태 코드 
|상태 코드| 설명| 
|---|---|
|100번대(100~199)| 정보성 상태 코드 | 
| 200Q번대(200-299)| 성공 상태 코드 | 
| 300본댜(300~399)| 리다이렉션 상태 코드 | 
|400번대(400~499) |클라이언트 에러 상태 코드| 
|500(500~599)| 서버 에러 상태 코드| 

### HTTP의 발전 
#### HTTP/0.9 
- 지금은 사용되지 않는 초창기 HTTP 버전이다. 
- 사용가능한 메서드 GET 뿐이었고 요청 메시지는 한줄로 구성되고, 헤더가 지원되지 않았다. 


#### HTTP/1.0 
- HEAD, POST와 같은 GET 이외의 메서드가 도입되었고 헤더가 지원되기 시작해 훨씬 많은 정보를 주고 받을 수 있었다. 
- 공식적으로 지속 연결 (persistent connection)을 지원하지 않고 HTTP 메시지를 주고 받을 때 마다 연결 수립과 종료를 반복했다. 

#### HTTP/1.1 
- 지속 연결이 공식적으로 지원되었다. 
- 특정 요청에 대한 응답이 수신되기 전에 다음 요청을 보낼 수 있는 파이프라이닝 기능이 추가되었다. 
- 콘텐츠 협상 기능 등 다양한 편의 기능, 사용 가능한 헤더가 추가 되었다. 

#### HTTP/2.0
- HTTP/1.0의 효율과 성능을 높이기 위해기 개선된 버전이다.
- HTTP/2.0에서는 송수신 효율을 높이기 위해서 헤더를 압축해서 전송하고 바이너리 기반의 메시지를 송수신한다. 
- 클라이언트가 요청하지 않더라도 미래에 필요할 것으로 예상되는 자원을 미리 전송해 주는 서버 푸시 라는 기능을 제공하기도 한다. 
- Head Of Line Blocking 문제를 완화 시켰다. 

#### HTTP/3.0 
- 이전 버전의 HTTP들은 모두 TCP를 기반으로 동작하였지만 HTTP/3.0 부터 UDP를 기반으로 동작한다. 
- 정확히 UDP 를 기반으로 구현된 QUIC(Quick UDP Internet Connections)프로코톨을 기반으로 동작한다.  

--- 
> 강민철, 『혼자 공부하는 네트워크』, 한빛미디어 (2018)    

 