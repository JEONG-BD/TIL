# 물리 계층과 데이터 링크 계층  

- 허브는 주소 계층이 없는 물리 계층 장비이다. 전달 받은 신호를 다른 모든 포트로 내보기만 할 뿐이다.
- CSMA/CD를 통해 충돌 문제를 어느 정도 완화 할 수 있지만 더 근본적인 해결 방법은 전달받은 신호를 수신지 호스트가 연결된 포트로만 보내고 전이중 모드로 통신하면 된다. 
- 포트별로 콜리전 도메인이 나눠지기에 충돌 위험이 감소하고 CSMA/CD를 이용할 필요가 없는데 이러한 기능을 지원하는 장치가 데이터 링크 계층의 스위치이다. 
- 스위치가 전달받는 신호를 원하는 포트로만 내보낼 수 있는 것은 스위치가 MAC 주소를 학습할 수 있기 때문이다. 
  
## 스위치 
- 데이터 링크 계층의 네트워츠 장비로 2계층에서 사용한다고 해서 L2 스위치라고도 부른다. 
- 스위치는 허브와 달리 MAC 주소를 학습해서 특정 MAC 주소를 가진 호스트에만 프레임을 전달 가능하고 전이중 통신을 지원한다. 

### 스위치의 특징 
- 특정 포트와 해당 포트에 연결된 호스트의 MAC 주소와의 관계를 기억한다는 점이다. 이를 MAC 주소 학습이라고 부른다. 
- 스위치는 MAC 주소 학습을 위햇 포트와 연결된 호스트의 MAC 주소 간의 연관 관계를 메모리에 표 형태로 기억한다. 
- 스위치의 포트와 연결된 호스트의 MAC 주소 연관 관계를 나타내는 정보는 MAC 주소 테이블이라고 한다. 

### MAC 주소 학습 
- 스위치가 처음 호스트에서 프레임을 수신하면 송신지 MAC 주소를 바탕으로 호스트 A의 MAC 주소와 연결된 포트를 MAC 주소 테이블에 저장한다. 

### 플러딩
- 스위치는 허브처럼 송신지 포트를 제외한 모든 포트로 프레임을 전송하는 것을 플러딩이라고 한다. 
- 호스트 B, C, D는 프레임을 전달 하고 B, D는 자신과 관련이 없는 프레임을 전송 받았으므로 폐기 한다. 
- 호스트 C는 스위치로 다시 응답 프레임을 전송하고 이 프레임의 송신지 MAC 주소가 명시되어 있는데 호스트 MAC 주소와 연결된 포트를 알아내어 이 MAC 정보를 테이블에 저장한다.  

### 필터링 
- 전달받은 프레임을 어디로 내보내고 어디로 내보내지 않을지 결정하는 스위치의 기능을 필러링이라고 한다. 

### 포워딩 
- 프레임이 전송될 포트에 실제로 보내는 것을 포워딩이라고 한다. 

### 에이징 
- MAC 주소 테이블에 등록된 특정 포트에서 일정 시간 동안 프레임을 전송 받지 못했다면 해당 항목은 삭제되는데 이를 에이징이라고 한다. 


### 브리지 
- 데이터 링크 계층에는 스위치와 유사한 장비로 브리지가 있다. 
- 네트워크 영역을 구획하여 콜리전 도메인을 나누거나 네트워크를 확장하는 용도로 사용된다. 
- 단일 장비로서 브리지는 대중화된 스위치에 비해 사용 빈도가 줄어드는 추세이다. 
- 브리지를 이용한 네트워크 구획 및 확장은 스위치에서 얼마든 가능하고 최근의 스위치 기능은 브리지의 기능을 포괄하며 프레임의 성능 처리에도 뛰어 나다. 


## VLAN
- 스위치의 또다든 주요한 기능으로 VLAN이 있다. 
- 허브는 송신지의 포트를 제외한 모든 신호를 내보내기 때문에 네트워크상 불필요한 트래픽이 들어날 수 밖에 없고 성능 저하로 이어진다. 
- 스위치를 이용해도 비슷하다. 스위치에 연결된 호스트 중에 서로 메시지를 주고받을 일이 적거나 브로드캐스트 메시지를 받을 필요가 없어서 같은 LAN에 속할 필요가 없는 호스트가 있을 수 있다. 
- 이들을 분리하고자 매번 새로운 스위치 장비를 구비하는 것은 낭비 이기 때문에 이때 구성하는 것이 VLAN이다. 
- VLAN을 구성하면 한대의 물리적 스위치라 해도 여러대의 스위치가 있는 것 처럼 논리적인 단위로 LAN을 구성 가능하다. 
- VLAN1은 총무부 VALN2는 개발부에서 속해있을 경우 VLAN1에 속한 호스트가 VLAN2에 속한 호스트와 통신 하고자 한다면 데이터 링크 계층의 장비가 아닌 네크워크 계층 이상의 장비가 필요하다. 
  

### 포트 기반 VLAN 
- 가장 단순하고 대중적인 방식으로 포트 기반 VLAN은 한마디로 스위치의 포트가 VLAN을 결정하는 방식이다. 
- 처음에 특정 포트에 VLAN을 할당하고 해당 포트에 호스트를 연결함으로써 VLAN에 포함시킬 수 있다. 
  
### VLAN 트렁킹 
- 두 대 이상의 VLAN 스위치를 효율적으로 연결하여 확장하는 방법이다. 
- 스우치 간의 통신을 위한 특별한 포트인 프렁크 포트에 VLAN 스위치를 서로 연결하는 방식이다. 


### MAC 기반 VLAN 
- 사전에 설정된 MAC 주소에 따라 VLAN이 결정되는 MAC 기반 VLAN이다. 
- 포트가 VLAN을 결정하는 것이 아니라 송수힌하는 프레임 속 MAC 주소가 호스트가 속할 VLAN을 결정하는 방식이다. 
--- 
> 강민철, 『혼자 공부하는 네트워크』, 한빛미디어 (2018)    
